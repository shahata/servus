#!/usr/bin/env node

'use strict';

var nopt = require('nopt');
var chalk = require('chalk');
var servus = require('../lib');
var updateNotifier = require('update-notifier');

var notifier = updateNotifier({packagePath: '../package.json', callback: function (error, update) {
  if (update && update.current !== update.latest) {
    notifier.update = update;
    notifier.notify();
  }
}});

var knownOpts = {
    help: Boolean,
    port: Number,
    cors: Boolean,
    gzip: Boolean,
    open: String
  },
  shortOpts = {
    h: ['--help'],
    p: ['--port'],
    x: ['--cors'],
    z: ['--gzip'],
    o: ['--open']
  },
  options = nopt(knownOpts, shortOpts);

if (options.help) {
  console.log('\n'+chalk.yellow.bold('Servus')+' ('+chalk.cyan('Slovak')+': '+chalk.magenta('Servus')+', '+chalk.cyan('Croatian')+': '+
              chalk.magenta('Serbus')+' or '+chalk.magenta('Servus')+', '+chalk.cyan('Hungarian')+': '+chalk.magenta('Szervusz')+', '+
              chalk.cyan('Polish')+': '+chalk.magenta('Serwus')+', '+chalk.cyan('Austro-Bavarian')+': '+chalk.magenta('Servus')+', '+
              chalk.cyan('Romanian')+': '+chalk.magenta('Servus')+', '+chalk.cyan('Slovene')+': '+chalk.magenta('Serbus')+' or '+
              chalk.magenta('Servus')+', '+chalk.cyan('Czech')+': '+chalk.magenta('Servus')+', '+chalk.cyan('Ukrainian')+': '+
              chalk.magenta('Сервус')+') is a '+chalk.green('salutation')+' used in many parts of '+chalk.green('Central')+' and '+
              chalk.green('Eastern Europe')+'. It is a word of greeting or parting like the Italian "'+chalk.yellow('Ciao')+'".\n\n'+
              chalk.red('Read more at: ')+chalk.magenta('https://github.com/shahata/servus')+'\n');
} else {
  servus(options);
}

